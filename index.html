<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊñáÈÉΩ‰∫ëÂõæÔºöÂçó‰∫¨Áé∞ÂΩì‰ª£ÊñáÂ≠¶Âú∞ÂõæÊï∞Â≠óÂØºËßà‰∏éÊñáÂàõÂπ≥Âè∞</title>
    <link rel="stylesheet" href="./css/style.css">
    <!-- Âú®index.htmlÁöÑ<head>ÈÉ®ÂàÜÊ∑ªÂä† -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>" type="image/svg+xml">
    <link rel="stylesheet" href="./css/ai_assistant.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;500&display=swap" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.2/echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
        :root {
            --primary-color: #1a5fad;
            --secondary-color: #2a8fe6;
            --accent-color: #ff6b6b;
            --dark-text: #2d3748;
            --light-text: #718096;
            --bg-gradient: linear-gradient(135deg, #f8f9fa, #e9ecef);
            --side-panel-bg: rgba(255, 255, 255, 0.9);
            --side-panel-width: 280px;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: var(--bg-gradient);
            color: var(--dark-text);
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://example.com/nanjing-skyline.jpg') center/cover;
            color: white;
            padding: 3rem 1rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-family: 'Noto Serif SC', serif;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: fadeInDown 1s ease;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            animation: fadeIn 1.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from { 
                opacity: 0;
                transform: translateY(-20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .explore-btn-container {
            position: relative;
            overflow: hidden;
            margin: 3rem 0;
            padding: 4rem 0;
            display: flex;           
            justify-content: center; 
            align-items: center;     
            text-align: center;     
        }
        
        .explore-btn {
            display: inline-block;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-weight: bold;
            text-decoration: none;
            box-shadow: 0 10px 20px rgba(42, 143, 230, 0.3);
            position: relative;
            overflow: hidden;
            z-index: 1;
            transition: all 0.4s;
        }
        
        .explore-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            z-index: -1;
            transition: all 0.4s;
        }
        
        .explore-btn:hover:before {
            transform: scale(1.05);
            opacity: 0.8;
        }
        
        .explore-btn:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }
        
        .explore-btn:hover:after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .location-detail h3 {
            color: var(--primary-color);
            font-family: 'Noto Serif SC', serif;
            margin-bottom: 0.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .location-detail h3:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 3px;
            background: var(--accent-color);
        }
        
        .author-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .author-info h3 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .author-info p {
            color: var(--light-text);
            margin-bottom: 1rem;
        }
        
        .work-title {
            font-weight: bold;
            color: var(--dark-text);
        }
        
        .work-author {
            font-size: 0.9rem;
            color: var(--light-text);
            margin: 0.3rem 0;
        }
        
        .work-excerpt {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #4a5568;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            max-width: 1400px;
            margin: 2rem auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden;
            background: white;
            position: relative;
            z-index: 1;
        }
        
        #mapContainer {
            height: 600px;
            width: 100%;
            position: relative;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        #infoPanel {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: white;
            border-right: 1px solid #e2e8f0;
        }
        
        .location-detail, .author-info {
            animation: fadeIn 0.5s ease;
        }
        
        .literary-works ul {
            list-style-type: none;
            padding: 0;
        }
        
        .literary-works li {
            padding: 0.8rem;
            margin: 0.5rem 0;
            background: rgba(74, 108, 247, 0.05);
            border-left: 3px solid var(--primary-color);
            transition: all 0.3s;
        }
        
        .literary-works li:hover {
            background: rgba(74, 108, 247, 0.1);
            transform: translateX(5px);
        }
        
        .counter {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            font-weight: 500;
        }
        
        .counter-number {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 0 0.5rem;
            color: rgb(15, 26, 78);
        }
        
        .search-container {
            max-width: 800px;
            margin: -2rem auto 2rem;
            position: relative;
            z-index: 10;
            padding: 0 1rem;
        }
        
        #searchInput {
            width: 100%;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            font-size: 1.1rem;
            transition: all 0.3s;
            background: white url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23718096" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>') no-repeat 1.5rem center;
            padding-left: 3.5rem;
        }
        
        #searchInput:focus {
            outline: none;
            box-shadow: 0 5px 20px rgba(42, 143, 230, 0.3);
            transform: translateY(-2px);
        }
        
        #searchBtn {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            padding: 0 1.5rem;
            border: none;
            background: var(--primary-color);
            color: white;
            border-radius: 0 50px 50px 0;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        #searchBtn:hover {
            background: var(--secondary-color);
        }
        
        /* Êñ∞Â¢ûÔºö‰æßËæπÊªöÂä®Èù¢ÊùøÊ†∑Âºè */
        .side-panel {
            position: fixed;
            top: 0;
            bottom: 0;
            width: var(--side-panel-width);
            background: var(--side-panel-bg);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            z-index: 100;
            overflow-y: auto;
            transition: transform 0.4s ease;
            backdrop-filter: blur(5px);
            border-radius: 0 12px 12px 0;
        }
        
        .left-panel {
            left: 0;
            transform: translateX(-100%);
        }
        
        .right-panel {
            right: 0;
            transform: translateX(100%);
        }
        
        .side-panel.visible {
            transform: translateX(0);
        }
        
        .panel-toggle {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 99;
            transition: all 0.3s ease;
        }
        
        .panel-toggle:hover {
            background: var(--secondary-color);
            width: 45px;
        }
        
        .left-toggle {
            left: 0;
        }
        
        .right-toggle {
            right: 0;
            border-radius: 8px 0 0 8px;
        }
        
        .panel-header {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
        }
        
        .timeline-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px dashed #e2e8f0;
        }
        
        .timeline-year {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        .timeline-content {
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .author-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .author-card {
            background: rgba(42, 143, 230, 0.08);
            border-radius: 8px;
            padding: 0.8rem;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .author-card:hover {
            background: rgba(42, 143, 230, 0.15);
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .author-name {
            font-weight: 500;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .quote {
            font-style: italic;
            padding: 1rem;
            border-left: 3px solid var(--accent-color);
            background: rgba(255, 107, 107, 0.05);
            margin: 1.5rem 0;
            border-radius: 0 6px 6px 0;
        }
        
        .quote-author {
            text-align: right;
            font-size: 0.9rem;
            color: var(--light-text);
            margin-top: 0.5rem;
        }
        
        .recommended-book {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .book-cover {
            flex: 0 0 60px;
            height: 80px;
            background: var(--secondary-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            text-align: center;
            padding: 0.5rem;
            line-height: 1.3;
        }
        
        .book-info {
            flex: 1;
        }
        
        .book-title {
            font-weight: bold;
            margin-bottom: 0.3rem;
        }
        
        .book-author {
            font-size: 0.85rem;
            color: var(--light-text);
            margin-bottom: 0.5rem;
        }
        
        .book-desc {
            font-size: 0.85rem;
            line-height: 1.5;
        }
        
        @media (max-width: 1200px) {
            .side-panel {
                width: 240px;
            }
        }
        
        @media (max-width: 992px) {
            .side-panel {
                width: 220px;
                padding: 1rem;
            }
            
            .panel-header {
                font-size: 1.3rem;
            }
        }
        
        @media (max-width: 768px) {
            .side-panel {
                width: 85%;
                border-radius: 0;
            }
            
            .left-panel {
                transform: translateX(-100%);
            }
            
            .right-panel {
                transform: translateX(100%);
            }
            
            .panel-toggle {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Â∑¶‰æß‰ø°ÊÅØÈù¢Êùø -->
    <div class="side-panel left-panel" id="leftPanel">
        <div class="panel-header">Âçó‰∫¨ÊñáÂ≠¶Êó∂Èó¥ËΩ¥</div>
        
        <div class="timeline-item">
            <div class="timeline-year">1920-1930</div>
            <div class="timeline-content">
                <p>Âçó‰∫¨Êàê‰∏∫Êñ∞ÊñáÂåñËøêÂä®ÁöÑÈáçË¶ÅÈòµÂú∞ÔºåÊú±Ëá™Ê∏Ö„ÄÅ‰øûÂπ≥‰ºØÁ≠â‰ΩúÂÆ∂Âú®Âçó‰∫¨Âàõ‰Ωú‰∫ÜÂ§ßÈáè‰ΩúÂìÅ„ÄÇ</p>
                <p>1923Âπ¥ÔºåÊú±Ëá™Ê∏ÖÂú®Âçó‰∫¨Âàõ‰Ωú‰∫ÜËëóÂêçÊï£Êñá„ÄäÊ°®Â£∞ÁÅØÂΩ±ÈáåÁöÑÁß¶Ê∑ÆÊ≤≥„Äã„ÄÇ</p>
            </div>
        </div>
        
        <div class="timeline-item">
            <div class="timeline-year">1930-1940</div>
            <div class="timeline-content">
                <p>Âçó‰∫¨‰Ωú‰∏∫Ê∞ëÂõΩÈ¶ñÈÉΩÔºåÊñáÂ≠¶Âàõ‰ΩúÁπÅËç£ÔºåÊ∂åÁé∞Âá∫Âº†ÊÅ®Ê∞¥„ÄÅÂ∑¥ÈáëÁ≠â‰ΩúÂÆ∂„ÄÇ</p>
                <p>1934Âπ¥ÔºåÂº†ÊÅ®Ê∞¥ÂºÄÂßãÂú®Âçó‰∫¨Âàõ‰Ωú„ÄäÈáëÁ≤â‰∏ñÂÆ∂„Äã„ÄÇ</p>
            </div>
        </div>
        
        <div class="timeline-item">
            <div class="timeline-year">1950-1960</div>
            <div class="timeline-content">
                <p>Êñ∞‰∏≠ÂõΩÊàêÁ´ãÂêéÔºåÂçó‰∫¨ÊñáÂ≠¶ËøõÂÖ•Êñ∞ÁöÑÂèëÂ±ïÈò∂ÊÆµÔºåÈôÜÊñáÂ§´„ÄÅÈ´òÊôìÂ£∞Á≠â‰ΩúÂÆ∂Ê¥ªË∑É„ÄÇ</p>
                <p>1957Âπ¥ÔºåÈôÜÊñáÂ§´ÂèëË°®Áü≠ÁØáÂ∞èËØ¥„ÄäÂ∞èÂ∑∑Ê∑±Â§Ñ„ÄãÔºåÊèèÂÜôÂçó‰∫¨Â∞èÂ∏ÇÊ∞ëÁîüÊ¥ª„ÄÇ</p>
            </div>
        </div>
        
        <div class="timeline-item">
            <div class="timeline-year">1980Ëá≥‰ªä</div>
            <div class="timeline-content">
                <p>Êñ∞Êó∂ÊúüÂçó‰∫¨ÊñáÂ≠¶ÁπÅËç£ÔºåÂè∂ÂÖÜË®Ä„ÄÅËãèÁ´•„ÄÅÊØïÈ£ûÂÆáÁ≠â‰ΩúÂÆ∂Â¥õËµ∑„ÄÇ</p>
                <p>Âè∂ÂÖÜË®ÄÂàõ‰Ωú‰∫Ü„ÄäÂçó‰∫¨‰∫∫„Äã„ÄäÂçó‰∫¨‰º†„ÄãÁ≠âÂçó‰∫¨È¢òÊùê‰ΩúÂìÅ„ÄÇ</p>
            </div>
        </div>
        
        <div class="panel-header" style="margin-top: 2rem;">Âçó‰∫¨‰ΩúÂÆ∂Áæ§</div>
        <div class="author-list">
            <div class="author-card" data-author="Êú±Ëá™Ê∏Ö">
                <div class="author-name">Êú±Ëá™Ê∏Ö</div>
            </div>
            <div class="author-card" data-author="‰øûÂπ≥‰ºØ">
                <div class="author-name">‰øûÂπ≥‰ºØ</div>
            </div>
            <div class="author-card" data-author="Âº†ÊÅ®Ê∞¥">
                <div class="author-name">Âº†ÊÅ®Ê∞¥</div>
            </div>
            <div class="author-card" data-author="Â∑¥Èáë">
                <div class="author-name">Â∑¥Èáë</div>
            </div>
            <div class="author-card" data-author="Âè∂ÂÖÜË®Ä">
                <div class="author-name">Âè∂ÂÖÜË®Ä</div>
            </div>
            <div class="author-card" data-author="ËãèÁ´•">
                <div class="author-name">ËãèÁ´•</div>
            </div>
            <div class="author-card" data-author="ÊØïÈ£ûÂÆá">
                <div class="author-name">ÊØïÈ£ûÂÆá</div>
            </div>
            <div class="author-card" data-author="ÈôÜÊñáÂ§´">
                <div class="author-name">ÈôÜÊñáÂ§´</div>
            </div>
        </div>
        
        <div class="quote">
            "ÈÄõÂçó‰∫¨ÂÉèÈÄõÂè§Ëë£Èì∫Â≠êÔºåÂà∞Â§ÑÈÉΩÊúâ‰∫õÊó∂‰ª£‰æµËöÄÁöÑÈÅóÁóï„ÄÇ‰Ω†ÂèØ‰ª•Êë©Êå≤ÔºåÂèØ‰ª•Âá≠ÂêäÔºåÂèØ‰ª•ÊÇ†ÁÑ∂ÈÅêÊÉ≥..."
            <div class="quote-author">‚Äî‚Äî Êú±Ëá™Ê∏Ö„ÄäÂçó‰∫¨„Äã</div>
        </div>
    </div>
    
    <!-- Âè≥‰æß‰ø°ÊÅØÈù¢Êùø -->
    <div class="side-panel right-panel" id="rightPanel">
        <div class="panel-header">ÊñáÂ≠¶Âú∞Ê†áÂØºËßà</div>
        
        <div class="recommended-book">
            <div class="book-cover">Áß¶Ê∑ÆÊ≤≥</div>
            <div class="book-info">
                <div class="book-title">Ê°®Â£∞ÁÅØÂΩ±ÈáåÁöÑÁß¶Ê∑ÆÊ≤≥</div>
                <div class="book-author">Êú±Ëá™Ê∏Ö</div>
                <div class="book-desc">Êú±Ëá™Ê∏Ö‰∏é‰øûÂπ≥‰ºØÂêåÊ∏∏Áß¶Ê∑ÆÊ≤≥ÂêéÂêÑËá™Âàõ‰ΩúÁöÑÊï£ÊñáÂêçÁØáÔºåÊèèÂÜô‰∫ÜÁß¶Ê∑ÆÊ≤≥Â§úÊôØÂíå‰∫∫ÊñáÈ£éÊÉÖ„ÄÇ</div>
            </div>
        </div>
        
        <div class="recommended-book">
            <div class="book-cover">Â§´Â≠êÂ∫ô</div>
            <div class="book-info">
                <div class="book-title">Âçó‰∫¨‰∫∫</div>
                <div class="book-author">Âè∂ÂÖÜË®Ä</div>
                <div class="book-desc">Âè∂ÂÖÜË®ÄÁ¨î‰∏ãÂçó‰∫¨‰∫∫ÁöÑÁîüÊ¥ªÁôæÊÄÅÔºåÂ§´Â≠êÂ∫ôÁöÑÂ∏Ç‰∫ïÊ∞îÊÅØÂú®‰π¶‰∏≠ÂæóÂà∞ÁîüÂä®Â±ïÁé∞„ÄÇ</div>
            </div>
        </div>
        
        <div class="recommended-book">
            <div class="book-cover">‰∏≠Â±±Èôµ</div>
            <div class="book-info">
                <div class="book-title">ÈíüÂ±±È£éÈõ®</div>
                <div class="book-author">Âº†ÊÅ®Ê∞¥</div>
                <div class="book-desc">‰ª•Âçó‰∫¨‰∏∫ËÉåÊôØÁöÑÈïøÁØáÂ∞èËØ¥ÔºåÊèèÁªò‰∫ÜÊ∞ëÂõΩÊó∂ÊúüÂçó‰∫¨ÁöÑÁ§æ‰ºöÂèòËøÅ„ÄÇ</div>
            </div>
        </div>
        
        <div class="panel-header" style="margin-top: 1.5rem;">ÊñáÂ≠¶Â∞èË¥¥Â£´</div>
        <div class="timeline-content">
            <p><strong>Âçó‰∫¨ÊñáÂ≠¶Âú∞Âõæ‰ΩøÁî®ÊåáÂçóÔºö</strong></p>
            <ul>
                <li>ÁÇπÂáªÂú∞Âõæ‰∏äÁöÑÊ†áËÆ∞ÁÇπÊü•ÁúãËØ¶ÊÉÖ</li>
                <li>ÊêúÁ¥¢Ê°ÜÂèØÊü•Êâæ‰ΩúÂÆ∂Âèä‰ΩúÂìÅ</li>
                <li>‰ΩúÂÆ∂Âç°ÁâáÂèØÂø´ÈÄüÂÆö‰ΩçÁõ∏ÂÖ≥Âú∞ÁÇπ</li>
                <li>‰ΩøÁî®Êó∂Èó¥ËΩ¥‰∫ÜËß£ÊñáÂ≠¶ÂèëÂ±ïËÑâÁªú</li>
            </ul>
        </div>
        
        <div class="quote">
            "Âçó‰∫¨ÁöÑÂèØÁà±ÔºåÂú®ÊñáÂ≠¶‰∏≠Ë°®Áé∞ÂæóÊúÄ‰∏∫ÂÖÖÂàÜ„ÄÇÂÖ≠ÊúùÂè§ÈÉΩÁöÑÊ≤ßÊ°ëÔºåÁß¶Ê∑ÆÊ≤≥ÁöÑÈ£éÊúàÔºåÁéÑÊ≠¶ÊπñÁöÑÁÉüÊ≥¢ÔºåÈÉΩÂú®‰ΩúÂÆ∂Á¨î‰∏ãÂæóÂà∞‰∫ÜÊ∞∏Áîü„ÄÇ"
            <div class="quote-author">‚Äî‚Äî Âè∂ÂÖÜË®Ä</div>
        </div>
    </div>
    
    <!-- Èù¢ÊùøÂàáÊç¢ÊåâÈíÆ -->
    <div class="panel-toggle left-toggle" id="leftToggle">Êñá</div>
    <div class="panel-toggle right-toggle" id="rightToggle">Â≠¶</div>

    <div class="header">
        <h1>Êé¢Á¥¢‰ΩúÂÆ∂Á¨î‰∏ãÁöÑ‰∫∫ÊñáÂçó‰∫¨</h1>
        <p>ÊñáÈÉΩ‰∫ëÂõæÔºöÂçó‰∫¨Áé∞ÂΩì‰ª£ÊñáÂ≠¶Âú∞ÂõæÊï∞Â≠óÂØºËßà‰∏éÊñáÂàõÂπ≥Âè∞</p>
    </div>
    
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="ËØ∑ËæìÂÖ•‰ΩúÂÆ∂ÂßìÂêç(Â¶Ç:Âè∂ÂÖÜË®Ä„ÄÅÊú±Ëá™Ê∏Ö...)">
        <button id="searchBtn">ÊêúÁ¥¢</button>
    </div>
    
    <div class="container">
        <div id="mapContainer"></div>
        
        <div class="sidebar">
            <div id="infoPanel">
                <div class="default-message">
                    <h3>Ê¨¢Ëøé‰ΩøÁî®Âçó‰∫¨Áé∞ÂΩì‰ª£ÊñáÂ≠¶Âú∞ÂõæÊï∞Â≠óÂØºËßà‰∏éÊñáÂàõÂπ≥Âè∞</h3>
                    <p>Âú®ÊêúÁ¥¢Ê°Ü‰∏≠ËæìÂÖ•‰ΩúÂÆ∂ÂßìÂêçÔºåÊü•Áúã‰ªñ‰ª¨Âú®Âçó‰∫¨ÁöÑÂàõ‰ΩúË∂≥Ëøπ</p>
                    <p>ÁÇπÂáªÂú∞Âõæ‰∏äÁöÑÊ†áËÆ∞ÁÇπÔºåÊü•Áúã‰ΩúÂìÅËØ¶ÊÉÖ</p>
                    <p>‰ΩøÁî®‰∏§‰æßÈù¢Êùø‰∫ÜËß£Êõ¥Â§öÂçó‰∫¨ÊñáÂ≠¶‰ø°ÊÅØ</p>
                </div>
            </div>
            
            <div id="counter">
                <div class="counter-label">ÂΩìÂâçÂ±ïÁ§∫</div>
                <div class="counter-number">0</div>
                <div class="counter-label">‰∏™Áõ∏ÂÖ≥Âú∞Ê†á</div>
            </div>
        </div>
    </div>
    
    <!-- AIÂä©ÊâãÂÆπÂô®‰øùÊåÅ‰∏çÂèò -->
    <div id="ai-assistant">
        <div id="chat-container">
            <div class="chat-header">
                <h3>Âçó‰∫¨ÊñáÂ≠¶Âä©Êâã</h3>
                <button id="close-chat">√ó</button>
            </div>
            <!-- ËôöÊãüÂΩ¢Ë±°Âå∫Âüü -->
            <div id="avatar-container">
                <div id="avatar-animation"></div>
            </div>
            <div id="chat-messages"></div>
            <div class="chat-input">
                <input type="text" id="user-input" placeholder="ËæìÂÖ•ÂÖ≥‰∫éÂçó‰∫¨Áé∞ÂΩì‰ª£ÊñáÂ≠¶ÁöÑÈóÆÈ¢ò...">
                <button id="send-btn">ÂèëÈÄÅ</button>
            </div>
        </div>
        <button id="chat-toggle">üí¨üí¨</button>
    </div>

    <div class="explore-btn-container">
        <a href="./html/product.html" class="explore-btn">
            ÊñáÂàõ‰∫ßÂìÅ
        </a>
    </div>
    
    <script src="./js/script.js"></script>
    <script src="./js/ai_assistant.js"></script> 
    
    <script>
        // Èù¢ÊùøÂàáÊç¢ÂäüËÉΩ
        document.getElementById('leftToggle').addEventListener('click', function() {
            document.getElementById('leftPanel').classList.toggle('visible');
        });
        
        document.getElementById('rightToggle').addEventListener('click', function() {
            document.getElementById('rightPanel').classList.toggle('visible');
        });
        
        // ÁÇπÂáª‰ΩúÂÆ∂Âç°ÁâáÊó∂Ëá™Âä®ÊêúÁ¥¢
        document.querySelectorAll('.author-card').forEach(card => {
            card.addEventListener('click', function() {
                const author = this.getAttribute('data-author');
                document.getElementById('searchInput').value = author;
                document.getElementById('searchBtn').click();
                
                // Á°Æ‰øùÂ∑¶‰æßÈù¢ÊùøÊâìÂºÄ
                document.getElementById('leftPanel').classList.add('visible');
            });
        });
    
        // Âú∞ÂõæÂàùÂßãÂåñ‰ª£Á†Å
        $(document).ready(function() {
            const myChart = echarts.init(document.getElementById('mapContainer'));
        
        // ‰ΩøÁî®ÂÖ®Â±ÄÂáΩÊï∞Ëé∑ÂèñÊ†áËÆ∞ÁÇπÊï∞ÊçÆ
        const allMarkers = window.getNanjingMarkers();
            // ÊòæÁ§∫Âä†ËΩΩÂä®Áîª
            myChart.showLoading({
        text: 'Ê≠£Âú®Âä†ËΩΩÊñáÂ≠¶Âú∞Âõæ...',
        color: '#4a6cf7',
        textColor: '#4a5568',
        maskColor: 'rgba(255, 255, 255, 0.95)',
        spinnerRadius: 15,
        lineWidth: 4,
        fontSize: 16,
        fontWeight: 'bold'
    });
    function showCustomLoading() {
        $('#mapContainer').append(`
            <div class="custom-loading">
                <div class="loading-spinner">
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
                <div class="loading-text">Êé¢Á¥¢Âçó‰∫¨ÊñáÂ≠¶‰∏ñÁïå...</div>
            </div>
        `);
    }
    
    function hideCustomLoading() {
        $('.custom-loading').fadeOut(300, function() {
            $(this).remove();
        });
    }
            // ‰ΩøÁî®Êú¨Âú∞Âú∞ÂõæÊï∞ÊçÆ
            fetch('./data/nanjing.json')
                .then(response => response.json())
                .then(nanjingGeoJSON => {
                    echarts.registerMap('nanjing', nanjingGeoJSON);
                    
                    const allMarkers = window.getNanjingMarkers();
                    
                    const option = {
                        title: {
                            text: 'Âçó‰∫¨ÊñáÂ≠¶Âú∞Âõæ',
                            subtext: '‰ΩúÂÆ∂Á¨î‰∏ãÁöÑ‰∫∫ÊñáÂçó‰∫¨',
                            left: 'center',
                            textStyle: { 
                                color: '#2d3748', 
                                fontSize: 24,
                                fontWeight: 'bold'
                            },
                            subtextStyle: { 
                                color: '#718096',
                                fontSize: 16
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            backgroundColor: 'rgba(255, 255, 255, 0.95)',
                            borderColor: '#e2e8f0',
                            borderWidth: 1,
                            padding: 15,
                            borderRadius: 8,
                            textStyle: {
                                color: '#2d3748'
                            },
                            formatter: function(params) {
                                if (params.componentType === 'series') {
                                    return `<div style="font-weight:bold;margin-bottom:5px;">${params.name}</div>
                                            <div>${params.data.excerpt || 'Âçó‰∫¨ÊñáÂ≠¶Âú∞Ê†á'}</div>
                                            <div style="margin-top:8px;color:#4a5568;">ÁÇπÂáªÊü•ÁúãËØ¶ÊÉÖ</div>`;
                                }
                                return params.name;
                            }
                        },
                        geo: {
                            map: 'nanjing',
                            roam: true,
                            zoom: 8,
                            center: [118.8, 32.05],
                            label: { 
                                emphasis: { 
                                    show: false 
                                } 
                            },
                            itemStyle: {
                                areaColor: '#e8f4ff',
                                borderColor: '#297acc'
                            },
                            emphasis: {
                                itemStyle: { 
                                    areaColor: '#a4d0ff' 
                                },
                                label: { 
                                    show: true, 
                                    color: '#1a3d66' 
                                }
                            }
                        },
                        series: [{
                            name: 'ÊñáÂ≠¶Âú∞Ê†á',
                            type: 'scatter',
                            coordinateSystem: 'geo',
                            symbol: 'pin',
                            symbolSize: [40, 50],
                            itemStyle: { 
                                color: '#ff6b6b' 
                            },
                            data: allMarkers,
                            label: {
                                show: true,
                                formatter: '{b}',
                                position: 'bottom',
                                color: '#1a3d66',
                                fontSize: 12
                            },
                            zlevel: 2
                        }]
                    };
                    
                    // Â∫îÁî®ÈÖçÁΩÆ
                    myChart.setOption(option);
                    
                    // ÈöêËóèÂä†ËΩΩÂä®Áîª
                    myChart.hideLoading();
                    
                    // Êõ¥Êñ∞ËÆ°Êï∞Âô®
                    $('.counter-number').text(allMarkers.length);
                    
                    // Âú∞ÂõæÁÇπÂáª‰∫ã‰ª∂
                    myChart.on('click', function(params) {
    if (params.componentType === 'series') {
        const location = params.data;
        
        let worksHtml = '';
        if (location.works && location.works.length > 0) {
            worksHtml = '<div class="literary-works"><h4>Áõ∏ÂÖ≥‰ΩúÂìÅ:</h4><ul>';
            
            location.works.forEach(work => {
                const title = work.title || "Êú™Áü•‰ΩúÂìÅ";
                const author = work.author || "Êú™Áü•‰ΩúËÄÖ";
                const excerpt = work.excerpt || "ÊöÇÊó†ÊèèËø∞";
                const nanjingDesc = work.nanjingDescription || "ÊöÇÊó†Âçó‰∫¨Áõ∏ÂÖ≥ÊèèÂÜô";
                const locationName = work.location || "Êú™Áü•Âú∞ÁÇπ";
                
                worksHtml += `
                    <li class="work-item">
                        <div class="work-header">
                            <span class="work-title">„Ää${title}„Äã</span>
                            <span class="work-location">- ${locationName}</span>
                        </div>
                        <div class="work-author">‰ΩúËÄÖÔºö${author}</div>
                        <div class="work-excerpt">${excerpt}</div>
                        <div class="nanjing-description">
                            <div class="desc-title">Âçó‰∫¨ÊèèÂÜôÔºö</div>
                            <div class="desc-content">${nanjingDesc}</div>
                        </div>
                    </li>
                `;
            });
            
            worksHtml += '</ul></div>';
        } else {
            worksHtml = '<p class="no-works">ÊöÇÊó†Áõ∏ÂÖ≥‰ΩúÂìÅ‰ø°ÊÅØ</p>';
        }
        
        $('#infoPanel').html(`
            <div class="location-info">
                <h3>${location.name || "Êú™Áü•Âú∞ÁÇπ"}</h3>
                <p class="location-description">${location.excerpt || "Ê±üËãèÁúÅ‰ºöÔºåÂÖ≠ÊúùÂè§ÈÉΩÔºå‰∏≠ÂõΩÁé∞‰ª£ÊñáÂ≠¶ÈáçË¶ÅÂüéÂ∏Ç"}</p>
                ${worksHtml}
            </div>
        `);
    }
});
});
            // ÂìçÂ∫îÁ™óÂè£Â§ßÂ∞èÂèòÂåñ
            window.addEventListener('resize', function() {
                myChart.resize();
            });
            
            // ÊêúÁ¥¢ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            $('#searchBtn').click(function() {
                const query = $('#searchInput').val().trim().toLowerCase();
                const exactMatch = Object.keys(authorsData).find(author => 
        author.toLowerCase() === query
    );
                // ÂÖàÂèñÊ∂à‰πãÂâçÊâÄÊúâÈ´ò‰∫Æ
                myChart.dispatchAction({ type: 'downplay' });
                
                // ËøáÊª§Âá∫ÂåÖÂê´ËØ•‰ΩúËÄÖÁöÑÂú∞Ê†áÁÇπ
                const filteredMarkers = allMarkers.filter(marker => 
                    marker.authors && marker.authors.some(author => author.includes(query))
                );
                
                if (filteredMarkers.length > 0) {
                    // Êõ¥Êñ∞Âú∞ÂõæÊï∞ÊçÆ - Âè™ÊòæÁ§∫ËØ•‰ΩúÂÆ∂Áõ∏ÂÖ≥ÁöÑÊ†áËÆ∞ÁÇπ
                    myChart.setOption({
                        series: [{
                            data: filteredMarkers
                        }]
                    });
                    
                    // Êõ¥Êñ∞ËÆ°Êï∞Âô®
                    $('.counter-number').text(filteredMarkers.length);
                    
                    // È´ò‰∫ÆÁõ∏ÂÖ≥Âå∫Âüü
                    filteredMarkers.forEach(marker => {
                        myChart.dispatchAction({
                            type: 'highlight',
                            seriesIndex: 0,
                            name: marker.name
                        });
                    });
                    
                    // Êü•Êâæ‰ΩúÂÆ∂‰ø°ÊÅØ
                    const matchedAuthor = Object.keys(authorsData).find(author => 
            author.includes(query) || query.includes(author)
                    );
                    
                     if (matchedAuthor) {
            const authorInfo = authorsData[matchedAuthor];
            // ÊûÑÂª∫‰ΩúÂìÅÂàóË°®ÔºàÂÆåÊï¥‰ª£Á†ÅÔºâ
            let worksHtml = '';
            if (authorInfo.works && authorInfo.works.length > 0) {
                worksHtml = '<div class="literary-works"><h4>‰ª£Ë°®‰ΩúÂìÅ:</h4><ul>';
                authorInfo.works.forEach(work => {
                    // Á°Æ‰øùÊòæÁ§∫‰ΩúÂìÅÊèèËø∞
                    worksHtml += `<li>
                        <div class="work-title">„Ää${work.title}„Äã</div>
                        <div class="work-location">Âú∞ÁÇπ: ${work.location}</div>
                        <div class="work-excerpt">${work.excerpt}</div>
                        <div class="nanjing-description">${work.nanjingDescription || 'ÊöÇÊó†Âçó‰∫¨Áõ∏ÂÖ≥ÊèèÂÜô'}</div>
                    </li>`;
                });
                worksHtml += '</ul></div>';
            }
            
            $('#infoPanel').html(`
                <div class="author-info">
                    <h3>${authorInfo.name}</h3>
                    <p>${authorInfo.intro}</p>
                    ${worksHtml}
                </div>
            `);
        }
    } else {
                    $('#infoPanel').html(`<div class="author-info">
                        <h3>Êú™ÊâæÂà∞Áõ∏ÂÖ≥ÁªìÊûú</h3>
                        <p>ËØ∑Â∞ùËØïÊêúÁ¥¢‰ΩúÂÆ∂ÂßìÂêç(Â¶Ç:Âè∂ÂÖÜË®Ä„ÄÅÊú±Ëá™Ê∏Ö)ÊàñÂú∞ÁÇπÂêçÁß∞(Â¶Ç:Áß¶Ê∑ÆÊ≤≥„ÄÅÂ§´Â≠êÂ∫ô)</p>
                    </div>`);
                    
                    myChart.setOption({
                        series: [{
                            data: allMarkers
                        }]
                    });
                    $('.counter-number').text(allMarkers.length);
                }
            });
        });
    </script>
</body>
</html>
